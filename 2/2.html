<!DOCTYPE html>

<html lang="zh-TW">

<head>

  <meta charset="UTF-8" />

  <title>RPG è‡ªå‹•æˆ°é¬¥é¦–é </title>

  <style>

    body {

      margin: 0;

      background: #0c0c1c;

      color: #fff;

      font-family: "Microsoft JhengHei", sans-serif;

      display: flex;

      flex-direction: column;

      align-items: center;

      padding: 10px;

      zoom: 1.5;

      font-size: 11px;

    }

    .hp-bar-wrapper {

      margin: 6px 0;

    }

    .hp-bar-bg {

      background-color: #444;

      border: 1px solid #222;

      width: 100%;

      height: 18px;

      border-radius: 4px;

      overflow: hidden;

      position: relative;

    }

    .hp-bar-fill {

      background-color: #e53935;

      height: 100%;

      width: 100%;

      transition: width 0.4s ease;

    }

    .hp-bar-text {

      font-size: 12px;

      margin-top: 4px;

      color: #fff;

      text-align: center;

    }

    .container {

      width: auto;

      display: flex;

      flex-direction: column;

      gap: 6px;

    }

    .row {

      display: flex;

      justify-content: space-between;

      width: 100%;

      min-width: 240px;

      gap: 10px;

    }

    .section {

      background: rgba(255, 255, 255, 0.08);

      border: 1px solid #444;

      border-radius: 4px;

      padding: 6px 8px;

      box-shadow: inset 0 0 4px #111;

      flex: 1;

    }

    .section h2 {

      margin: 0 0 4px 0;

      font-size: 12px;

      border-bottom: 1px solid #555;

      padding-bottom: 2px;

    }

    .section span {

      display: block;

      margin: 2px 0;

    }

    #battleLog {

      margin-top: 5px;

      background: #111;

      padding: 6px;

      border-radius: 4px;

      max-height: 160px;

      overflow-y: auto;

      font-size: 11px;

    }

    #equipModal, #skillModal {

      display: none;

      position: fixed;

      top: 10%;

      left: 50%;

      transform: translateX(-50%);

      background-color: #222;

      padding: 12px;

      border: 1px solid #888;

      border-radius: 6px;

      z-index: 1000;

      width: 90vw;

      max-width: 200px;

      max-height: 70vh;

      overflow: hidden;

      box-sizing: border-box;

    }

    #skillModal h3 {

      margin-top: 0;

      font-size: 13px;

      border-bottom: 1px solid #666;

      padding-bottom: 4px;

    }

    #skillList {

      max-height: 50vh;

      overflow-y: auto;

      padding-right: 4px;

      box-sizing: border-box;

    }

    #modalBackdrop, #skillBackdrop {

      display: none;

      position: fixed;

      top: 0;

      left: 0;

      width: 100vw;

      height: 100vh;

      background: rgba(0, 0, 0, 0.5);

      z-index: 999;

    }

    /* ğŸ† æ–°å¢ï¼šæ¨¡æ…‹è¦–çª—æ¨£å¼ */

    .setup-modal {

      display: none;

      position: fixed;

      z-index: 10000;

      left: 0;

      top: 0;

      width: 100%;

      height: 100%;

      overflow: auto;

      background-color: rgba(0, 0, 0, 0.8);

      justify-content: center;

      align-items: center;

    }

    .setup-modal-content {

      background-color: #1a1a2e;

      color: #fff;

      padding: 20px;

      border-radius: 8px;

      width: 80%;

      max-width: 300px;

      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);

      text-align: center;

    }

    .setup-modal-content h2 {

      margin-top: 0;

      font-size: 1.5em;

      border-bottom: 2px solid #5c628e;

      padding-bottom: 10px;

    }

    .mini-toggle {

  margin-left: 6px;

  padding: 2px 6px;

  font-size: 10px;

  background: #2e2e4e;

  color: #fff;

  border: 1px solid #5c628e;

  border-radius: 3px;

  cursor: pointer;

}

.mini-toggle:hover {

  background: #3a3a72;

}

    .setup-modal-content input, .setup-modal-content select, .setup-modal-content button {

      width: calc(100% - 20px);

      padding: 8px;

      margin-top: 10px;

      border-radius: 4px;

      border: 1px solid #5c628e;

      background-color: #2e2e4e;

      color: #fff;

    }

    .setup-modal-content button {

      cursor: pointer;

      background-color: #4a4a8a;

    }

    .setup-modal-content button:hover {

      background-color: #6a6ad0;

    }

  </style>

</head>

<body>

  

  <div id="gameSetupModal" class="setup-modal">

    <div class="setup-modal-content">

      <h2>è¨­å®šè§’è‰²</h2>

      <div>

        <label for="nicknameInput">æš±ç¨±ï¼š</label>

        <input type="text" id="nicknameInput" placeholder="è¼¸å…¥ä½ çš„æš±ç¨±">

      </div>

      <div>

        <label for="jobSelect">è·æ¥­ï¼š</label>

        <select id="jobSelect">

          <option value="warrior">æˆ°å£«</option>

          <option value="mage">æ³•å¸«</option>

          <option value="archer">å¼“ç®­æ‰‹</option>

          <option value="thief">ç›œè³Š</option>

        </select>

      </div>

      <button onclick="startGame()">é–‹å§‹éŠæˆ²</button>

    </div>

  </div>



<!-- åªè²¼ <body> å…§ä¸»è¦å€å¡Šï¼Œæ¨£å¼æ²¿ç”¨ä½ ç¾æœ‰çš„ï¼›æŠŠé€™æ®µæ›¿æ›ä½ åŸæœ¬çš„å°æ‡‰å€å¡Šå³å¯ -->



<div class="container">

  <div class="row">

    <div class="section">

      <h2>è§’è‰²è³‡è¨Š</h2>

      <div>

        æš±ç¨±ï¼š<span id="player-nickname"></span><br>

        è·æ¥­ï¼š<span id="player-job"></span>

      </div>

      <hr style="border: 1px solid #444; margin: 6px 0;">

      <div>

        ç­‰ç´šï¼š<span id="player-level">1</span><br>

        ç¶“é©—å€¼ï¼š<span id="player-exp">0 / 100</span><br>

        <progress id="exp-bar" value="0" max="100" style="width: 100%; height: 1.5em;"></progress>

      </div>

    </div>



    <div class="section">

      <h2>è³‡æº</h2>

      <span>æ¥“å¹£ï¼š<strong id="gold">0</strong></span>

      <span>é‘½çŸ³ï¼š<strong id="gem">0</strong></span>

      <span>å¼·åŒ–çŸ³ï¼š<strong id="stone">0</strong></span>

      <div style="margin-top:6px;">

        <button onclick="openInventoryModal()">ğŸ’ èƒŒåŒ…</button>

        <button onclick="openShopModal()">å•†åº—</button>

      </div>

    </div>

  </div>





<div class="row">

  <div class="section" style="width:100%;">



    <h2>

      å±¬æ€§é»æ•¸

      <!-- é¡¯ç¤º/éš±è—åˆ†é… UI çš„é–‹é—œ -->

      <button id="toggleStatAllocBtn"

              onclick="toggleStatAlloc()"

              style="margin-left:6px;padding:2px 6px;font-size:10px;background:#2e2e4e;color:#fff;border:1px solid #5c628e;border-radius:3px;cursor:pointer;">

        éš±è—

      </button>

    </h2>



    <!-- â–¼ é€™ä¸€å¡Šæ˜¯ã€Œåˆ†é… UIã€ï¼›è‹¥è¦é è¨­éš±è—å¯æŠŠ style æ”¹æˆ display:none -->

    <div id="stat-alloc-area" style="margin-top:6px;">

      <div>

        <strong>å¯åˆ†é…é»æ•¸</strong>ï¼š<span id="stat-points-display">0</span>

      </div>



      <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:6px;">

        <div style="flex:1;min-width:140px;display:flex;justify-content:space-between;align-items:center;">

          <span>åŠ›é‡ï¼š<span id="str-display">10</span></span>

          <button class="stat-button" onclick="allocateStat('str')" style="font-size:10px;padding:2px 6px;">ï¼‹</button>

        </div>

        <div style="flex:1;min-width:140px;display:flex;justify-content:space-between;align-items:center;">

          <span>æ•æ·ï¼š<span id="agi-display">10</span></span>

          <button class="stat-button" onclick="allocateStat('agi')" style="font-size:10px;padding:2px 6px;">ï¼‹</button>

        </div>

        <div style="flex:1;min-width:140px;display:flex;justify-content:space-between;align-items:center;">

          <span>æ™ºåŠ›ï¼š<span id="int-display">10</span></span>

          <button class="stat-button" onclick="allocateStat('int')" style="font-size:10px;padding:2px 6px;">ï¼‹</button>

        </div>

        <div style="flex:1;min-width:140px;display:flex;justify-content:space-between;align-items:center;">

          <span>å¹¸é‹ï¼š<span id="luk-display">10</span></span>

          <button class="stat-button" onclick="allocateStat('luk')" style="font-size:10px;padding:2px 6px;">ï¼‹</button>

        </div>

      </div>

    </div>

    <!-- â–² åˆ†é… UI çµæŸ -->



    <!-- ã€Œè©³ç´°æ•¸å€¼ã€å›ºå®šä¿ç•™ -->

    <div style="text-align:center;margin-top:10px;">

      <button class="stat-button" onclick="openStatModal()">è©³ç´°æ•¸å€¼</button>

    </div>



  </div>

</div>

  <div class="row">

    <!-- èƒ½åŠ›å€¼ï¼šä¸ŠåŠéƒ¨å›ºå®šé¡¯ç¤ºï¼Œä¸‹åŠéƒ¨å¯æ”¶åˆ -->

    <div class="section">

<h2>èƒ½åŠ›å€¼

  <button class="mini-toggle" id="toggleExtraStatsBtn" onclick="toggleExtraStats()">éš±è—</button>

</h2>



<!-- å›ºå®šé¡¯ç¤ºï¼ˆä¸å—æ”¶åˆå½±éŸ¿ï¼‰ -->

<span>è¡€é‡ï¼š<strong id="hp">100 / 100</strong></span>

<span>è­·ç›¾å€¼ï¼š<strong id="shield">0</strong></span>

<span>é­”åŠ›ï¼š<strong id="mp">0 / 0</strong></span>



<!-- æ³•å¸«å°ˆç”¨ï¼šé­”åŠ›è­·ç›¾ï¼ˆéæ³•å¸«æœƒè‡ªå‹•éš±è—ï¼‰ -->

<div id="manaShieldRow" style="display:none;">

  <span>é­”åŠ›è­·ç›¾ï¼š<strong id="manaShieldPct">0%</strong></span>

  <button id="manaShieldBtn" onclick="toggleMagicShield()">ğŸ›¡ï¸ é­”åŠ›è­·ç›¾ï¼šé—œ</button>

</div>



<!-- é€²éšèƒ½åŠ›ï¼ˆå¯æ”¶åˆï¼‰ -->

<div id="extra-stats" style="margin-top:6px;">

  <span>æ”»æ“ŠåŠ›ï¼š<strong id="atk">10</strong></span>

  <span>é˜²ç¦¦åŠ›ï¼š<strong id="def">5</strong></span>

  <span>æŠ€èƒ½å‚·å®³ï¼š<strong id="skillDamage">0%</strong></span>

  <span>å›å¾©ï¼š<strong id="recover">0%</strong></span>

  <span>é–ƒé¿ï¼š<strong id="dodge">0%</strong></span>

  <span>çˆ†æ“Šç‡ï¼š<strong id="critRate">0%</strong></span>

  <span>çˆ†æ“Šå‚·å®³ï¼š<strong id="critMultiplier">0%</strong></span>

  <span id="comboRateRow" style="display:none;">é€£æ“Šç‡ï¼š<strong id="comboRate">0%</strong></span>

  <span>æ¸›å‚·ç‡ï¼š<strong id="damageReduce">0%</strong></span>

  <div>ç¶“é©—å€¼: <span id="expRate">0.0%</span></div>

  <div>æ‰å¯¶ç‡: <span id="dropRate">0.0%</span></div>

  <div>æ¥“å¹£æ‰è½ç‡: <span id="goldRate">0.0%</span></div>

      </div>

    </div>



    <div class="section" id="side-slot">

      <h2>ï¼ˆé ç•™å€å¡Šï¼‰</h2>

      <button onclick="window.openSkillModal()">ğŸ“˜ æŠ€èƒ½æ¸…å–®</button>



      <button onclick="openElementEquipmentPanel()">âœ¨ å…ƒç´ è£å‚™</button>

      <button onclick="openModulePanel()">æ¢å¾©ç³»çµ±</button>

<button onclick="upgradeClover()">å‡ç´šå¹¸é‹è‰</button>







  </div>

</div>







  <div id="skillBackdrop"></div>

  <div id="skillModal">

    <h3>æŠ€èƒ½æ¸…å–®</h3>

    <div id="skillList"></div>

    <button onclick="closeSkillModal()">é—œé–‰</button>

  </div>

  <div class="card skill-status-card">



  </div>



  <div class="section" style="width: 100%;">

    <h2>æˆ°é¬¥è¨­å®š</h2>

<button id="btnStart">é–‹å§‹æˆ°é¬¥</button>

<button id="btnStop">åœæ­¢æˆ°é¬¥</button>

<span id="diffQueuedBadge" style="display:none;margin-left:.5rem;"></span>

<div id="monsters-box"></div>

        <br>

    <label for="mapSelect">é¸æ“‡åœ°åœ–ï¼š</label>

    <select id="mapSelect"></select>

    <!-- æˆ°é¬¥è¨­å®šå€å¡Šå…§ï¼ŒmapSelect / levelRange é™„è¿‘ -->

<!-- HTML ä¸»é ï¼ˆä»»ä¸€è™•æœ‰ç©ºæ®¼å³å¯ï¼‰ï¼š -->

<label for="difficultySelect">é›£åº¦ï¼š</label>

<select id="difficultySelect"></select>

    <br>

    <label for="levelRange">é¸æ“‡æ€ªç‰©ç­‰ç´šç¯„åœï¼š</label>

    <div style="display: flex; align-items: center; gap: 0.5em; flex-wrap: wrap;">

      <select id="levelRange"></select>

      <span id="minLevelNotice" style="color: #ffd700; font-size: 0.9em;"></span>

    

    </div>

  </div>

  

    <div class="section" style="width: 100%;">

<!-- â–¼ æŠ€èƒ½æ§åˆ¶å€ï¼ˆå¯æ”¶åˆï¼‰ -->

<section class="panel">

  <header class="panel-header">

    <span>æŠ€èƒ½æ§åˆ¶å€</span>

    <button class="toggle-btn" onclick="togglePanel('skill-control-body')">â–¼</button>

  </header>

  <div id="skill-control-body" class="panel-body">

    <div id="skillStatus" class="skill-grid">

      <!-- é€™è£¡æœƒç”± JS æ¸²æŸ“å„æŠ€èƒ½çš„ CD / Buff æŒçºŒæ™‚é–“ -->

    </div>

  </div>

</section>

 </div>

  

  <div class="section" style="width: 100%;">

    <h2>æ€ªç‰©è³‡è¨Š</h2>

    <div id="monsterInfo">å°šæœªé­é‡æ€ªç‰©</div>

  </div>





  <div class="section" style="width: 100%;">

    <h2>è‡ªå‹•æˆ°é¬¥ç³»çµ±</h2>

    <div id="battleLog">æˆ°é¬¥æ—¥èªŒè¼‰å…¥ä¸­...</div>

  </div>

<body>

<body>

<script src="stats_system/player.js"></script>

<script src="stats_system/resources.js"></script>

<script src="offline/offline_rewards.js"></script>

<script src="stats_system/jobs.js"></script>

<script src="stats_system/main.js"></script>



<script src="map/map_data.js"></script>

<script src="map/monster_data.js"></script>

<script src="map/elite_monsters.js"></script>

<script src="map/difficulty.js"></script>

<script src="map/monster_utils.js"></script>

<script src="map/ui_utils.js"></script>

<script src="mapboss/boss_mode.js"></script>



<script src="item/inventory.js"></script>

<script src="item/shop_system.js"></script>



<!-- å…ƒç´ è£å‚™ï¼ˆä¸» â†’ å‡ç´š â†’ é€²éš â†’ æ˜ŸåŠ› â†’ çªç ´ï¼‰ -->

<script src="equipment2/element_equipment.js"></script>

<script src="equipment2/element_upgrade.js"></script>

<script src="equipment2/element_advance.js"></script>

<script src="equipment2/element_starforce.js"></script>

<script src="equipment2/element_breakthrough.js"></script>



<!-- RPG æˆ°é¬¥æ ¸å¿ƒ -->

<script src="logic/rpg/rpg.js"></script>

<script src="logic/rpg/rpgmobskill.js"></script>

<script src="logic/rpg/rpgplayerSkills.js"></script>

<script src="logic/rpg/battleUtils.js"></script>

<script src="logic/rpg/ignore_defense.js"></script>



<!-- æŠ€èƒ½ï¼ˆæ§åˆ¶å™¨ â†’ å„è·æ¥­ â†’ å…±ç”¨ â†’ UI/é¢æ¿ï¼‰ -->

<script src="skill/skills_controller.js"></script>

<script src="skill/skills_warrior.js"></script>

<script src="skill/skills_mage.js"></script>

<script src="skill/skills_archer.js"></script>

<script src="skill/skills_thief.js"></script>

<script src="skill/skills_common.js"></script>

<script src="skill/skill_panel.js"></script>

<script src="skill/skills_ui.js"></script>



<!-- å…¶ä»–ç³»çµ± -->

<script src="clover/clover.js"></script>

<script src="recovery/recovery_module.js"></script>

<script src="modskill/status_manager_player.js"></script>

<script src="skill/player_buffs.js"></script>

<script src="modskill/monster_skills.js"></script>

<script src="modskill/status_display_monster.js"></script>

<script src="modskill/monster_buffs.js"></script>

<script src="modskill/boss_buffs_core.js"></script>

<script src="logic/ui_updates.js"></script>

<script src="logic/monster_logic.js"></script>

<script src="logic/game_init.js"></script>

<script src="logic/death_logic.js"></script>



<!-- ä»»å‹™ï¼æˆå°± -->

<script src="quest/mission_rewards.js"></script>

<script src="quest/quest_core_es5.js"></script>

<script src="quest/quest_weekly_es5.js"></script>

<script src="quest/quest_daily_es5.js"></script>

<script src="quest/quest_repeat_es5.js"></script>



<link rel="stylesheet" href="skills_panel.css">



<script src="floating.js"></script>



<!-- âœ… çµ±ä¸€å­˜æª”æ©‹æ¥ï¼šæ”¾åœ¨æœ€å¾Œï¼Œç­‰æ‰€æœ‰ç³»çµ±éƒ½å·²è¼‰å…¥ -->

<script src="savs/save_bridge.js"></script>





<script>

  // å•Ÿå‹•è‡ªå‹•è¼‰å…¥ + é é›¢é è‡ªå‹•å­˜æª”

  SaveBridge.initAutoLoad();



  // ï¼ˆé¸é…ï¼‰æ¯ 30 ç§’è‡ªå‹•å­˜ä¸€æ¬¡ï¼Œé˜²æ‰‹æ®˜é—œé 

  setInterval(() => { SaveBridge.saveLocal(); }, 30000);

</script>

</body>

</html>

</body>









</html>

