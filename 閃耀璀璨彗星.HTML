<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>æŠ½å¡ç³»çµ± - é–ƒäº®ç’€ç’¨å½—æ˜Ÿ</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-b from-gray-900 to-gray-800 text-white min-h-screen flex items-center justify-center">

  <div class="bg-gray-700 p-6 rounded-2xl shadow-2xl w-full max-w-md space-y-6 text-center">
    <h1 class="text-3xl font-bold text-yellow-300">ğŸŒ  é–ƒäº®ç’€ç’¨å½—æ˜Ÿ</h1>

    <div class="flex justify-center space-x-4">
      <button onclick="selectGender('male')" id="maleBtn" class="px-4 py-2 rounded-full border border-white hover:bg-blue-600 transition">â™‚ ç”·æ€§</button>
      <button onclick="selectGender('female')" id="femaleBtn" class="px-4 py-2 rounded-full border border-white hover:bg-pink-600 transition">â™€ å¥³æ€§</button>
    </div>

    <div class="flex justify-center space-x-4">
      <button onclick="selectFunction('sparkling')" class="px-4 py-2 rounded-full bg-purple-600 hover:bg-purple-700 transition">âœ¨ é–ƒäº®å½—æ˜Ÿ</button>
      <button onclick="selectFunction('brilliant')" class="px-4 py-2 rounded-full bg-yellow-500 hover:bg-yellow-600 transition">ğŸ’ ç’€ç’¨å½—æ˜Ÿ</button>
    </div>

    <div class="flex justify-center space-x-4">
      <button onclick="drawSingle()" class="px-4 py-2 rounded-full bg-green-600 hover:bg-green-700 transition">ğŸ² å–®æŠ½</button>
      <button onclick="drawTen()" class="px-4 py-2 rounded-full bg-blue-600 hover:bg-blue-700 transition">ğŸ° åé€£æŠ½</button>
      <button onclick="clearHistory()" class="px-4 py-2 rounded-full bg-red-600 hover:bg-red-700 transition">ğŸ§¹ æ¸…é™¤ç´€éŒ„</button>
    </div>

    <div id="sparklingSection" class="pt-4 text-sm text-gray-300 hidden">
      <div>ç´¯ç©æŠ½å¡æ•¸é‡ï¼ˆé–ƒäº®ï¼‰ï¼š<span id="totalDraws">0</span></div>
      <div>æŠ½åˆ°Aç´šé“å…·æ•¸é‡ï¼ˆé–ƒäº®ï¼‰ï¼š<span id="totalAItems">0</span> (<span id="sparklingAChance">0%</span>)</div>
      <div>æŠ½åˆ°Bç´šé“å…·æ•¸é‡ï¼ˆé–ƒäº®ï¼‰ï¼š<span id="totalBItems">0</span> (<span id="sparklingBChance">0%</span>)</div>
    </div>

    <div id="brilliantSection" class="pt-4 text-sm text-gray-300 hidden">
      <div>ç´¯ç©æŠ½å¡æ•¸é‡ï¼ˆç’€ç’¨ï¼‰ï¼š<span id="totalDrawsBrilliant">0</span></div>
	  <div>æŠ½åˆ°Sç´šé“å…·æ•¸é‡ï¼ˆç’€ç’¨ï¼‰ï¼š<span id="totalSItemsBrilliant">0</span> (<span id="brilliantSChance">0%</span>)</div>
      <div>æŠ½åˆ°Aç´šé“å…·æ•¸é‡ï¼ˆç’€ç’¨ï¼‰ï¼š<span id="totalAItemsBrilliant">0</span> (<span id="brilliantAChance">0%</span>)</div>
    </div>

    <div id="history" class="pt-4 text-sm text-gray-300 max-h-96 overflow-y-auto space-y-2">
      <div class="font-bold text-white">æŠ½å–ç´€éŒ„</div>
    </div>
  </div>

  <script>
    let gender = null;
    let functionType = null;
    let totalDraws = 0;
    let totalAItems = 0;
    let totalBItems = 0;  // æ–°å¢Bç´šé“å…·è¨ˆæ•¸
    let totalDrawsBrilliant = 0;
    let totalAItemsBrilliant = 0;
    let totalSItemsBrilliant = 0;
    let history = [];

   // é–ƒäº®å½—æ˜Ÿé“å…·æ•¸æ“šèˆ‡æ©Ÿç‡
const sparklingItems = [
  { name: "ç´”æ½”ç†¾å¤©ä½¿", type: "A", chance: 0.80, gender: null },
  { name: "è–æ½”ç†¾å¤©ä½¿", type: "A", chance: 0.80, gender: null },
  { name: "æ¦®è€€ç†¾å¤©ä½¿(ç”·)", type: "A", chance: 0.90, gender: "male" },
  { name: "ç¥è–ç†¾å¤©ä½¿(å¥³)", type: "A", chance: 0.90, gender: "female" },
  { name: "å®ˆè­·è€…ç†¾å¤©ä½¿ç¾½æ¯›", type: "A", chance: 1.20, gender: null },
  { name: "å´‡é«˜ç†¾å¤©ä½¿", type: "A", chance: 1.10, gender: null },
  { name: "é«˜é›…ç†¾å¤©ä½¿", type: "A", chance: 1.10, gender: null },
  { name: "æˆ°é¬¥ç†¾å¤©ä½¿", type: "A", chance: 0.70, gender: null },
  { name: "å¯æ„›å…”å…”æ®ºäººé¯¨å‹•ç•«åç‰Œæˆ’æŒ‡", type: "A", chance: 0.20, gender: null },
  { name: "å¯æ„›å…”å…”æ®ºäººé¯¨å‹•ç•«èŠå¤©æˆ’æŒ‡", type: "A", chance: 0.20, gender: null },
  { name: "ä»²å¤å¤œè¨˜æ†¶", type: "B", chance: 1.50, gender: null },
  { name: "ä»²å¤å¤œå›æ†¶", type: "B", chance: 1.50, gender: null },
  { name: "ä»²å¤å¤œç²¾éˆ(ç”·)", type: "B", chance: 1.30, gender: "male" },
  { name: "ä»²å¤å¤œå¦–ç²¾(å¥³)", type: "B", chance: 1.30, gender: "female" },
  { name: "ä»²å¤å¤œè¨Šæ¯", type: "B", chance: 1.50, gender: null },
  { name: "ä»²å¤å¤œè´è¶", type: "B", chance: 1.30, gender: null },
  { name: "ä»²å¤å¤œèŠ±ç±ƒ", type: "B", chance: 1.20, gender: null },
  { name: "å…‰è¼çš„é¯Šé­šä¹‹æ§", type: "B", chance: 1.20, gender: null },
  { name: "è‡¨å±ä¸äº‚é‹å­", type: "B", chance: 1.20, gender: null },
  { name: "ç·Šæ€¥å‡ºå‹•æµ·ä¸Šæ•‘éšªéšŠå¸½å­", type: "C", chance: 1.23, gender: null },
  { name: "é»ƒé‡‘éµå† ", type: "C", chance: 1.23, gender: null },
  { name: "è–èª•ç´…é«®é£¾", type: "C", chance: 1.23, gender: null },
  { name: "å¯æ„›è–èª•", type: "C", chance: 1.23, gender: null },
  { name: "è–èª•éŠ…éˆ´", type: "C", chance: 1.23, gender: null },
  { name: "æ‡ˆå¯„ç”Ÿé–ƒäº®é«®é£¾", type: "C", chance: 1.23, gender: null },
  { name: "è–èª•æ¨¹å¸½å­", type: "C", chance: 1.23, gender: null },
  { name: "è¤è‰²éºµåŒ…å¸½", type: "C", chance: 1.23, gender: null },
  { name: "ç¶ è‰²éƒŠéŠå¸½", type: "C", chance: 1.23, gender: null },
  { name: "ç‹è€…ç±ƒçƒåç‰Œæˆ’æŒ‡", type: "C", chance: 1.23, gender: null },
  { name: "å‹è€…ç±ƒçƒåç‰Œæˆ’æŒ‡", type: "C", chance: 1.23, gender: null },
  { name: "ç‹è€…ç±ƒçƒèŠå¤©æˆ’æŒ‡", type: "C", chance: 1.23, gender: null },
  { name: "å‹è€…ç±ƒçƒèŠå¤©æˆ’æŒ‡", type: "C", chance: 1.23, gender: null },
  { name: "æ©™è‰²çœ¼é¡", type: "C", chance: 1.23, gender: null },
  { name: "ç™½è‰²é®é™½çœ¼é¡", type: "C", chance: 1.23, gender: null },
  { name: "è«æ€å¡ç™»çœ¼é¡", type: "C", chance: 1.23, gender: null },
  { name: "æ©™è‰²åœ“å½¢å¢¨é¡", type: "C", chance: 1.23, gender: null },
  { name: "ç·Šæ€¥å‡ºå‹•æµ·ä¸Šæ•‘éšªéšŠå¥—æœ", type: "C", chance: 1.23, gender: null },
  { name: "ç·Šæ€¥å‡ºå‹•æµ·ä¸Šæ•‘éšªéšŠåˆ¶æœ", type: "C", chance: 1.23, gender: null },
  { name: "å°é›åœè£™", type: "C", chance: 1.23, gender: null },
  { name: "ç´…è‰²å˜»å“ˆè£", type: "C", chance: 1.23, gender: null },
  { name: "è—è‰²å˜»å“ˆè£", type: "C", chance: 1.23, gender: null },
  { name: "ç´…æ•‘ç”Ÿè¡£", type: "C", chance: 1.23, gender: null },
  { name: "è‹±åœ‹è¶³çƒåˆ¶æœ No.7", type: "C", chance: 1.23, gender: null },
  { name: "æªæ—é€£å¸½å¥—è£", type: "C", chance: 1.23, gender: null },
  { name: "ç‹è€…ç±ƒçƒä¸Šè¡£", type: "C", chance: 1.23, gender: null },
  { name: "é›…ç—ç¶ é ˜å¸¶è¥¯è¡«", type: "C", chance: 1.23, gender: null },
  { name: "ç‚«å½©ç„¡åº•æ´ T-shirt", type: "C", chance: 1.23, gender: null },
  { name: "ç™½è‰²ä¼‘é–’å¥—é ­Tæ¤", type: "C", chance: 1.23, gender: null },
  { name: "æ”å½±å¸«é«˜é ˜æ¯›è¡£", type: "C", chance: 1.23, gender: null },
  { name: "ç²‰ç´…å°èŠ±å¥—é ­Tæ¤", type: "C", chance: 1.23, gender: null },
  { name: "æ£’æ£’å ‚ç”·å­©ä¸Šè¡£", type: "C", chance: 1.23, gender: null },
  { name: "ç²‰ç´…æ©«ç´‹Tæ¤", type: "C", chance: 1.23, gender: null },
  { name: "æ¨¡ç¯„ç”Ÿç²‰è‰²ä¸Šè¡£", type: "C", chance: 1.23, gender: null },
  { name: "å¤©è—æ˜Ÿé•·è¡«", type: "C", chance: 1.23, gender: null },
  { name: "æ„›éº—æ–¯å…”å­çš„ä¸‹è¡£", type: "C", chance: 1.23, gender: null },
  { name: "æµ·æ´‹ç³»ç™½è‰²ç‰›ä»”è¤²", type: "C", chance: 1.23, gender: null },
  { name: "è—è‰²è²¼èº«ç‰›ä»”è¤²", type: "C", chance: 1.23, gender: null },
  { name: "ç´…è‰²ç¡è¤²", type: "C", chance: 1.23, gender: null },
  { name: "ç°è‰²æ£’çƒè¤²", type: "C", chance: 1.23, gender: null },
  { name: "å½è£è»è¤²", type: "C", chance: 1.23, gender: null },
  { name: "è—è‰²ç¡è¤²", type: "C", chance: 1.23, gender: null },
  { name: "æ­é™½è²è²è¤²", type: "C", chance: 1.23, gender: null },
  { name: "è—è‰²è¡—èˆè¤²", type: "C", chance: 1.23, gender: null },
  { name: "æ²¹æ¼†ç‰›ä»”è¤²", type: "C", chance: 1.23, gender: null },
  { name: "ç·Šæ€¥å‡ºå‹•æµ·ä¸Šæ•‘éšªéšŠé‹", type: "C", chance: 1.23, gender: null },
  { name: "è¶…èƒ½æ¨é€²é‹å‹•é‹", type: "C", chance: 1.23, gender: null },
  { name: "å¢®è½åŸå¸‚é«˜å·¥çš®é‹", type: "C", chance: 1.23, gender: null },
  { name: "é­”æ³•å­¸åœ’é•·è¥ªé‹", type: "C", chance: 1.23, gender: null },
  { name: "æ­¦é™µé“å ´é‹å‹•é‹", type: "C", chance: 1.23, gender: null },
  { name: "å°èœœèœ‚å±è‚¡", type: "C", chance: 1.23, gender: null },
  { name: "é»ƒç²¾éˆç¿…è†€", type: "C", chance: 1.23, gender: null },
  { name: "å ±ç´™æŠ«é¢¨", type: "C", chance: 1.23, gender: null },
  { name: "è—è‰²å­¸ç”Ÿæ›¸åŒ…", type: "C", chance: 1.23, gender: null },
  { name: "è±å½¢é¢¨ç®", type: "C", chance: 1.23, gender: null },
  { name: "ç«ç®­æ¨é€²å™¨", type: "C", chance: 1.23, gender: null },
  { name: "å›§rzæŠ«é¢¨", type: "C", chance: 1.23, gender: null },
  { name: "ç·Šæ€¥å‡ºå‹•æµ·ä¸Šæ•‘éšªéšŠä¿¡è™Ÿæ§", type: "C", chance: 1.23, gender: null },
  { name: "éº‹é¹¿æ‰‹æ–", type: "C", chance: 1.23, gender: null },
  { name: "æˆ‘çš„è–èª•è€å…¬å…¬", type: "C", chance: 1.23, gender: null },
  { name: "éº‹é¹¿è§’", type: "C", chance: 1.23, gender: null },
  { name: "å·§å…‹åŠ›è˜‹æœ", type: "C", chance: 1.23, gender: null },
  { name: "æ™‚ç©ºä¹‹é‘°", type: "C", chance: 1.23, gender: null },
  { name: "å·§å…‹åŠ›ç³–", type: "C", chance: 1.23, gender: null },
  { name: "é¾èˆŒä¹‹ç„°", type: "C", chance: 1.23, gender: null },
  { name: "ç´…è˜¿è””å…”", type: "C", chance: 1.23, gender: null },
  { name: "è´è¶çµæ£’æ£’ç³–", type: "C", chance: 1.23, gender: null }
];


    const brilliantItems = [
      { name: "å®´æœƒçš„é»ƒé‡‘ç‹å† ", type: "S", chance: 1.19, gender: null },
  { name: "å®´æœƒçš„é»ƒé‡‘é«®å¤¾", type: "S", chance: 1.19, gender: null },
  { name: "å®´æœƒä¸»è§’å¥—æœ", type: "S", chance: 1.13, gender: null },
  { name: "å®´æœƒä¹‹èŠ±ç¦®æœ", type: "S", chance: 1.13, gender: null },
  { name: "å®´æœƒä¸»è§’é‹å­", type: "S", chance: 1.38, gender: null },
  { name: "å®´æœƒä¹‹èŠ±é‹å­", type: "S", chance: 1.38, gender: null },
  { name: "å®´æœƒèšå…‰ç‡ˆ", type: "S", chance: 1.26, gender: null },
  { name: "å®´æœƒçš„çš‡å®¶æ‰‹æ–", type: "S", chance: 0.85, gender: null },
  { name: "å®´æœƒçš„è¯éº—æ‰‡å­", type: "S", chance: 0.85, gender: null },
  { name: "å¯‚éœçš„ç·Šå¼µæ„Ÿ", type: "A", chance: 1.13, gender: null },
  { name: "ç¨å¥çš„è¯éº—", type: "A", chance: 1.13, gender: null },
  { name: "è‹¦æƒ±çš„æŒ‡æ®å®¶", type: "A", chance: 1.11, gender: null },
  { name: "å„ªé›…çš„æŒ‡æ®å®¶", type: "A", chance: 1.11, gender: null },
  { name: "å­¤ç¨çš„æ—‹å¾‹", type: "A", chance: 1.17, gender: null },
  { name: "å–®ç¨èˆå°çš„æ—‹å¾‹", type: "A", chance: 1.17, gender: null },
  { name: "è—è¡“å®¶çš„ç†æƒ³", type: "A", chance: 1.11, gender: null },
  { name: "å¯‚éœä¸­çš„éŸ³æ¨‚æœƒ", type: "A", chance: 1.03, gender: null },
  { name: "å„ªç¾çš„æ¼”å¥", type: "A", chance: 1.03, gender: null },
  { name: "è‰è“ç‰›å¥¶çš„è§’", type: "B", chance: 1.67, gender: null },
  { name: "è‰è“ç‰›å¥¶å¥—æœ(ç”·)", type: "B", chance: 1.63, gender: "male" },
  { name: "è‰è“ç‰›å¥¶å¥—æœ(å¥³)", type: "B", chance: 1.63, gender: "female" },
  { name: "è‰è“ç‰›å¥¶é‹", type: "B", chance: 1.60, gender: null },
  { name: "è‰è“ç‰›å¥¶", type: "B", chance: 1.63, gender: null },
  { name: "è‰è“ç‰›å¥¶æ£’", type: "B", chance: 1.57, gender: null },
  { name: "è‰è“ç‰›å¥¶ç“¶èŠå¤©æˆ’æŒ‡", type: "B", chance: 1.63, gender: null },
  { name: "è‰è“ç‰›å¥¶ç“¶åç‰Œæˆ’æŒ‡", type: "B", chance: 1.63, gender: null },
  { name: "é£›ç¿”ç«¹èœ»èœ“", type: "A", chance: 1.13, gender: null },
  { name: "å¤¢æƒ³æ—…äºº(ç”·)", type: "A", chance: 1.11, gender: "male" },
  { name: "å¥‡å¦™æ—…äºº(å¥³)", type: "A", chance: 1.11, gender: "female" },
  { name: "å¥è¡Œæ‹æª”", type: "A", chance: 1.17, gender: null },
  { name: "å¥è¡Œå¤¥ä¼´", type: "A", chance: 1.17, gender: null },
  { name: "é‹å‹•é¢¨æ¢éšªå®¶", type: "A", chance: 1.12, gender: null },
  { name: "å¯æ„›æ¢éšªå®¶", type: "A", chance: 1.12, gender: null },
  { name: "å†’éšªè¿·ä½ åœ°åœ–", type: "A", chance: 1.04, gender: null },
  { name: "å¯‚éœå‚³èªª", type: "B", chance: 1.61, gender: null },
  { name: "å¯‚å¯å‚³èªª", type: "B", chance: 1.61, gender: null },
  { name: "å…‰ä¹‹å‡èµ·å‚³èªª(ç”·)", type: "B", chance: 1.57, gender: "male" },
  { name: "å…‰ä¹‹å‡èµ·ç¥è©±(å¥³)", type: "B", chance: 1.57, gender: "female" },
  { name: "å¯‚å¯çš„éºè·¡", type: "B", chance: 1.53, gender: null },
  { name: "å€’ä¸‹çš„è’é‡", type: "B", chance: 1.62, gender: null },
  { name: "é¢¨ä¹‹ç—•è·¡", type: "B", chance: 1.68, gender: null },
  { name: "å¯’é¢¨ç—•è·¡", type: "B", chance: 1.68, gender: null },
  { name: "å¯‚éœç¬é–“", type: "B", chance: 1.53, gender: null },
  { name: "çƒå ´ä¸Šç†±æƒ…ç±ƒçƒå¸½", type: "A", chance: 1.12, gender: null },
  { name: "çƒå ´ä¸Šæ‹šå‹ç±ƒçƒå¸½", type: "A", chance: 1.12, gender: null },
  { name: "çƒå ´ä¸Šç†±æƒ…ç±ƒçƒæœ", type: "A", chance: 1.09, gender: null },
  { name: "çƒå ´ä¸Šæ‹šå‹ç±ƒçƒæœ", type: "A", chance: 1.09, gender: null },
  { name: "çƒå ´ä¸Šç†±æƒ…ç±ƒçƒé‹", type: "A", chance: 1.16, gender: null },
  { name: "çƒå ´ä¸Šæ‹šå‹ç±ƒçƒé‹", type: "A", chance: 1.09, gender: null },
  { name: "çƒå ´ä¸Šè§€çœ¾å¸­", type: "A", chance: 1.09, gender: null },
  { name: "çƒå ´ä¸Šçš„ç±ƒçƒ", type: "A", chance: 1.02, gender: null },
  { name: "è—è‰²æ„›ä¹¾æ·¨å°å…”", type: "B", chance: 1.63, gender: null },
  { name: "ç´«è‰²æ„›ä¹¾æ·¨å°å…”", type: "B", chance: 1.63, gender: null },
  { name: "æ™šå®‰è—è‰²ç¡è¡£", type: "B", chance: 1.61, gender: null },
  { name: "æ™šå®‰ç´«è‰²ç¡è¡£", type: "B", chance: 1.61, gender: null },
  { name: "æ³¡æ³¡å°å…”", type: "B", chance: 1.62, gender: null },
  { name: "åˆ·åˆ·ç‰™æ™‚é–“", type: "B", chance: 1.65, gender: null },
  { name: "æ™šå®‰è—è‰²å®¤å…§æ‹–", type: "B", chance: 1.65, gender: null },
  { name: "æ™šå®‰ç´«è‰²å®¤å…§æ‹–", type: "B", chance: 1.55, gender: null },
  { name: "æˆ‘è‡‰é °ä¸Šçš„é»ƒç“œé¢è†œ", type: "B", chance: 1.63, gender: null },
  { name: "æˆ‘è‡‰é °ä¸Šçš„æ´—é¢ä¹³", type: "B", chance: 1.63, gender: null },
  { name: "æ™´å¤©èŠ±æœµ", type: "A", chance: 1.13, gender: null },
  { name: "ç¶»æ”¾èŠ±æœµ", type: "A", chance: 1.13, gender: null },
  { name: "ç¶»æ”¾èŠ±è—å¸«(ç”·)", type: "A", chance: 1.12, gender: "male" },
  { name: "èŠ±å‰è¨­è¨ˆå¸«(å¥³)", type: "A", chance: 1.12, gender: "female" },
  { name: "è¼•é£„é£„èŠ±å† ", type: "A", chance: 1.17, gender: null },
  { name: "è¼•é£„é£„èŠ±è¼", type: "A", chance: 1.17, gender: null },
  { name: "æ˜¥æ—¥ä¹‹å¿ƒ", type: "A", chance: 1.12, gender: null },
  { name: "ç››é–‹çš„å¹¸ç¦", type: "A", chance: 1.04, gender: null },
  { name: "è¶…ç´šç„¡æ•µéœ¹é‚é•·çš„è…•é¾", type: "B", chance: 1.62, gender: null },
  { name: "è¶…ç´šç„¡æ•µéœ¹é‚é•·çš„é•·é ¸é¹¿", type: "B", chance: 1.62, gender: null },
  { name: "è…•é¾å¥—è£", type: "B", chance: 1.60, gender: null },
  { name: "é•·é ¸é¹¿å¥—è£", type: "B", chance: 1.60, gender: null },
  { name: "å¿«æ¨‚æµ·è±š", type: "B", chance: 1.61, gender: null },
  { name: "å¾ˆé«˜å¾ˆé«˜çš„æ¨¹", type: "B", chance: 1.61, gender: null },
  { name: "ç–Šé«˜é«˜æ¢¯å­", type: "B", chance: 1.66, gender: null },
  { name: "é­…åŠ›çš„å¾®ç¬‘", type: "B", chance: 1.73, gender: null }
    ];

    // è¨­ç½®æ€§åˆ¥
    function selectGender(g) {
      gender = g;
      document.getElementById("maleBtn").classList.toggle("bg-blue-600", g === 'male');
      document.getElementById("femaleBtn").classList.toggle("bg-pink-600", g === 'female');
    }

    // è¨­ç½®å½—æ˜Ÿé¡å‹
    function selectFunction(type) {
      functionType = type;
      if (type === 'sparkling') {
        document.getElementById("sparklingSection").classList.remove("hidden");
        document.getElementById("brilliantSection").classList.add("hidden");
      } else if (type === 'brilliant') {
        document.getElementById("brilliantSection").classList.remove("hidden");
        document.getElementById("sparklingSection").classList.add("hidden");
      }
      const outputMessage = type === 'sparkling' ? 'é¸æ“‡äº† é–ƒäº®å½—æ˜Ÿ' : 'é¸æ“‡äº† ç’€ç’¨å½—æ˜Ÿ';
      document.getElementById("history").innerText = `å·²é¸æ“‡ï¼š${outputMessage}`;
    }

    // æ›´æ–°çµ±è¨ˆ
    function updateCounters() {
      if (functionType === 'sparkling') {
        document.getElementById("totalDraws").innerText = totalDraws;
        document.getElementById("totalAItems").innerText = totalAItems;
        document.getElementById("totalBItems").innerText = totalBItems;

        // è¨ˆç®—Aç´šå’ŒBç´šçš„ç™¾åˆ†æ¯”æ©Ÿç‡
        const sparklingAChance = (totalAItems / totalDraws) * 100;
        const sparklingBChance = (totalBItems / totalDraws) * 100;

        document.getElementById("sparklingAChance").innerText = sparklingAChance.toFixed(2) + "%";
        document.getElementById("sparklingBChance").innerText = sparklingBChance.toFixed(2) + "%";
      } else if (functionType === 'brilliant') {
        document.getElementById("totalDrawsBrilliant").innerText = totalDrawsBrilliant;
        document.getElementById("totalAItemsBrilliant").innerText = totalAItemsBrilliant;
        document.getElementById("totalSItemsBrilliant").innerText = totalSItemsBrilliant;

        // è¨ˆç®—Aç´šå’ŒSç´šçš„ç™¾åˆ†æ¯”æ©Ÿç‡
        const brilliantAChance = (totalAItemsBrilliant / totalDrawsBrilliant) * 100;
        const brilliantSChance = (totalSItemsBrilliant / totalDrawsBrilliant) * 100;

        document.getElementById("brilliantAChance").innerText = brilliantAChance.toFixed(2) + "%";
        document.getElementById("brilliantSChance").innerText = brilliantSChance.toFixed(2) + "%";
      }
    }

    // æ›´æ–°æ­·å²ç´€éŒ„
    function updateHistory(result) {
      if (history.length >= 200) {
        history.pop();
      }
      history.unshift(result);

      const historyContainer = document.getElementById("history");
      historyContainer.innerHTML = "<div class='font-bold text-white'>æŠ½å–ç´€éŒ„</div>";  // ä¿è­‰é¡¯ç¤ºæ¨™é¡Œ
      history.forEach(item => {
        const recordElement = document.createElement("div");
        recordElement.innerText = item.name;

        if (item.type === "A") {
          recordElement.classList.add("bg-yellow-500", "text-black");
        } else if (item.type === "S") {
          recordElement.classList.add("bg-red-600", "text-white");
        } else if (item.type === "B") {
          recordElement.classList.add("bg-green-500", "text-black");
        } else {
          recordElement.classList.add("bg-gray-700", "text-white");
        }

        recordElement.classList.add("p-2", "rounded-lg", "mb-2");
        historyContainer.appendChild(recordElement);
      });
    }

    // å–®æŠ½é‚è¼¯
    function drawSingle() {
      if (!gender || !functionType) {
        document.getElementById("history").innerText = "è«‹å…ˆé¸æ“‡æ€§åˆ¥å’Œå½—æ˜ŸåŠŸèƒ½ï¼";
        return;
      }

      if (functionType === 'sparkling') {
        totalDraws++;
      } else if (functionType === 'brilliant') {
        totalDrawsBrilliant++;
      }

      let availableItems;
      if (functionType === 'sparkling') {
        availableItems = sparklingItems.filter(item => item.gender === null || item.gender === gender);
      } else if (functionType === 'brilliant') {
        availableItems = brilliantItems.filter(item => item.gender === null || item.gender === gender);
      }

      const totalChance = availableItems.reduce((total, item) => total + item.chance, 0);

      let randomNum = Math.random() * totalChance;
      let selectedItem = null;

      for (let item of availableItems) {
        randomNum -= item.chance;
        if (randomNum <= 0) {
          selectedItem = item;
          break;
        }
      }

      if (selectedItem.type === "A") {
        if (functionType === 'sparkling') {
          totalAItems++;
        } else if (functionType === 'brilliant') {
          totalAItemsBrilliant++;
        }
      }
      if (selectedItem.type === "B") {
        totalBItems++;  // è¨˜éŒ„Bç´šé“å…·
      }
      if (selectedItem.type === "S") {
        totalSItemsBrilliant++;
      }

      updateHistory(selectedItem);
      updateCounters();
    }

    // åé€£æŠ½é‚è¼¯
    function drawTen() {
      if (!gender || !functionType) {
        document.getElementById("history").innerText = "è«‹å…ˆé¸æ“‡æ€§åˆ¥å’Œå½—æ˜ŸåŠŸèƒ½ï¼";
        return;
      }

      if (functionType === 'sparkling') {
        totalDraws += 10;
      } else if (functionType === 'brilliant') {
        totalDrawsBrilliant += 10;
      }

      let results = [];
      let availableItems;
      if (functionType === 'sparkling') {
        availableItems = sparklingItems.filter(item => item.gender === null || item.gender === gender);
      } else if (functionType === 'brilliant') {
        availableItems = brilliantItems.filter(item => item.gender === null || item.gender === gender);
      }

      const totalChance = availableItems.reduce((total, item) => total + item.chance, 0);

      for (let i = 0; i < 10; i++) {
        let randomNum = Math.random() * totalChance;
        let selectedItem = null;

        for (let item of availableItems) {
          randomNum -= item.chance;
          if (randomNum <= 0) {
            selectedItem = item;
            break;
          }
        }

        results.push(selectedItem);

        if (selectedItem.type === "A") {
          if (functionType === 'sparkling') {
            totalAItems++;
          } else if (functionType === 'brilliant') {
            totalAItemsBrilliant++;
          }
        }
        if (selectedItem.type === "B") {
          totalBItems++;  // è¨˜éŒ„Bç´šé“å…·
        }
        if (selectedItem.type === "S") {
          totalSItemsBrilliant++;
        }
      }

      results.forEach(result => updateHistory(result));
      updateCounters();
    }

    // æ¸…ç©ºæ­·å²ç´€éŒ„
    function clearHistory() {
      history = [];
      totalDraws = 0;
      totalAItems = 0;
      totalBItems = 0;  // æ¸…ç©ºBç´šé“å…·
      totalDrawsBrilliant = 0;
      totalAItemsBrilliant = 0;
      totalSItemsBrilliant = 0;
      updateCounters();
      document.getElementById("history").innerHTML = "<div class='font-bold text-white'>æŠ½å–ç´€éŒ„</div>"; // æ¸…ç©ºå¾Œä»é¡¯ç¤ºæ¨™é¡Œ
    }
  </script>
</body>
</html>
