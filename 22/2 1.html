<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <title>RPG è‡ªå‹•æˆ°é¬¥é¦–é </title>
  <style>
    body {
      margin: 0;
      background: #0c0c1c;
      color: #fff;
      font-family: "Microsoft JhengHei", sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 10px;
      zoom: 1.5;
      font-size: 11px;
    }
    .hp-bar-wrapper {
      margin: 6px 0;
    }
    .hp-bar-bg {
      background-color: #444;
      border: 1px solid #222;
      width: 100%;
      height: 18px;
      border-radius: 4px;
      overflow: hidden;
      position: relative;
    }
    .hp-bar-fill {
      background-color: #e53935;
      height: 100%;
      width: 100%;
      transition: width 0.4s ease;
    }
    .hp-bar-text {
      font-size: 12px;
      margin-top: 4px;
      color: #fff;
      text-align: center;
    }
    .container {
      width: auto;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    .row {
      display: flex;
      justify-content: space-between;
      width: 100%;
      min-width: 240px;
      gap: 10px;
    }
    .section {
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid #444;
      border-radius: 4px;
      padding: 6px 8px;
      box-shadow: inset 0 0 4px #111;
      flex: 1;
    }
    .section h2 {
      margin: 0 0 4px 0;
      font-size: 12px;
      border-bottom: 1px solid #555;
      padding-bottom: 2px;
    }
    .section span {
      display: block;
      margin: 2px 0;
    }
    #battleLog {
      margin-top: 5px;
      background: #111;
      padding: 6px;
      border-radius: 4px;
      max-height: 160px;
      overflow-y: auto;
      font-size: 11px;
    }
    #equipModal, #skillModal {
      display: none;
      position: fixed;
      top: 10%;
      left: 50%;
      transform: translateX(-50%);
      background-color: #222;
      padding: 12px;
      border: 1px solid #888;
      border-radius: 6px;
      z-index: 1000;
      width: 90vw;
      max-width: 200px;
      max-height: 70vh;
      overflow: hidden;
      box-sizing: border-box;
    }
    #skillModal h3 {
      margin-top: 0;
      font-size: 13px;
      border-bottom: 1px solid #666;
      padding-bottom: 4px;
    }
    #skillList {
      max-height: 50vh;
      overflow-y: auto;
      padding-right: 4px;
      box-sizing: border-box;
    }
    #modalBackdrop, #skillBackdrop {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.5);
      z-index: 999;
    }
    /* ğŸ† æ–°å¢ï¼šæ¨¡æ…‹è¦–çª—æ¨£å¼ */
    .setup-modal {
      display: none;
      position: fixed;
      z-index: 10000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0, 0, 0, 0.8);
      justify-content: center;
      align-items: center;
    }
    .setup-modal-content {
      background-color: #1a1a2e;
      color: #fff;
      padding: 20px;
      border-radius: 8px;
      width: 80%;
      max-width: 300px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
      text-align: center;
    }
    .setup-modal-content h2 {
      margin-top: 0;
      font-size: 1.5em;
      border-bottom: 2px solid #5c628e;
      padding-bottom: 10px;
    }
    .setup-modal-content input, .setup-modal-content select, .setup-modal-content button {
      width: calc(100% - 20px);
      padding: 8px;
      margin-top: 10px;
      border-radius: 4px;
      border: 1px solid #5c628e;
      background-color: #2e2e4e;
      color: #fff;
    }
    .setup-modal-content button {
      cursor: pointer;
      background-color: #4a4a8a;
    }
    .setup-modal-content button:hover {
      background-color: #6a6ad0;
    }
  </style>
</head>
<body>
  
  <div id="gameSetupModal" class="setup-modal">
    <div class="setup-modal-content">
      <h2>è¨­å®šè§’è‰²</h2>
      <div>
        <label for="nicknameInput">æš±ç¨±ï¼š</label>
        <input type="text" id="nicknameInput" placeholder="è¼¸å…¥ä½ çš„æš±ç¨±">
      </div>
      <div>
        <label for="jobSelect">è·æ¥­ï¼š</label>
        <select id="jobSelect">
          <option value="warrior">æˆ°å£«</option>
          <option value="mage">æ³•å¸«</option>
          <option value="archer">å¼“ç®­æ‰‹</option>
          <option value="thief">ç›œè³Š</option>
        </select>
      </div>
      <button onclick="startGame()">é–‹å§‹éŠæˆ²</button>
    </div>
  </div>

<!-- åªè²¼ <body> å…§ä¸»è¦å€å¡Šï¼Œæ¨£å¼æ²¿ç”¨ä½ ç¾æœ‰çš„ï¼›æŠŠé€™æ®µæ›¿æ›ä½ åŸæœ¬çš„å°æ‡‰å€å¡Šå³å¯ -->

<div class="container">
  <div class="row">
    <div class="section">
      <h2>è§’è‰²è³‡è¨Š</h2>
      <div>
        æš±ç¨±ï¼š<span id="player-nickname"></span><br>
        è·æ¥­ï¼š<span id="player-job"></span>
      </div>
      <hr style="border: 1px solid #444; margin: 6px 0;">
      <div>
        ç­‰ç´šï¼š<span id="player-level">1</span><br>
        ç¶“é©—å€¼ï¼š<span id="player-exp">0 / 100</span><br>
        <progress id="exp-bar" value="0" max="100" style="width: 100%; height: 1.5em;"></progress>
      </div>
    </div>

    <div class="section">
      <h2>è³‡æº</h2>
      <span>æ¥“å¹£ï¼š<strong id="gold">0</strong></span>
      <span>é‘½çŸ³ï¼š<strong id="gem">0</strong></span>
      <span>å¼·åŒ–çŸ³ï¼š<strong id="stone">0</strong></span>
      <div style="margin-top:6px;">
        <button onclick="openInventoryModal()">ğŸ’ èƒŒåŒ…</button>
        <button onclick="openShopModal()">å•†åº—</button>
      </div>
    </div>
  </div>

  <!-- ğŸ†• ä¸­é–“ï¼šå±¬æ€§é»æ•¸ï¼ˆæ–°å¢å¹¸é‹ï¼‰ -->
  <div class="row">
    <div class="section" style="width:100%;">
      <h2>å±¬æ€§é»æ•¸</h2>
      <div style="margin-top:6px;">
        <strong>å¯åˆ†é…é»æ•¸</strong>ï¼š<span id="stat-points-display">0</span>
      </div>
      <div style="margin-top:8px;">
    </div>
      <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:6px;">
        <div style="flex:1;min-width:140px;display:flex;justify-content:space-between;align-items:center;">
          <span>åŠ›é‡ï¼š<span id="str-display">10</span></span>
          <button class="stat-button" onclick="allocateStat('str')" style="font-size:10px;padding:2px 6px;">ï¼‹</button>
        </div>
        <div style="flex:1;min-width:140px;display:flex;justify-content:space-between;align-items:center;">
          <span>æ•æ·ï¼š<span id="agi-display">10</span></span>
          <button class="stat-button" onclick="allocateStat('agi')" style="font-size:10px;padding:2px 6px;">ï¼‹</button>
        </div>
        <div style="flex:1;min-width:140px;display:flex;justify-content:space-between;align-items:center;">
          <span>æ™ºåŠ›ï¼š<span id="int-display">10</span></span>
          <button class="stat-button" onclick="allocateStat('int')" style="font-size:10px;padding:2px 6px;">ï¼‹</button>
        </div>
        <!-- ğŸ†• å¹¸é‹ -->
        <div style="flex:1;min-width:140px;display:flex;justify-content:space-between;align-items:center;">
          <span>å¹¸é‹ï¼š<span id="luk-display">10</span></span>
          <button class="stat-button" onclick="allocateStat('luk')" style="font-size:10px;padding:2px 6px;">ï¼‹</button>
        </div>
      </div>

      <div style="text-align:center;margin-top:10px;">
        <button class="stat-button" onclick="openStatModal()">è©³ç´°æ•¸å€¼</button>
      </div>
    </div>
  </div>

  <div class="row">
    <!-- èƒ½åŠ›å€¼ï¼šä¸ŠåŠéƒ¨å›ºå®šé¡¯ç¤ºï¼Œä¸‹åŠéƒ¨å¯æ”¶åˆ -->
    <div class="section">
      <h2>èƒ½åŠ›å€¼</h2>
      <!-- å›ºå®šé¡¯ç¤ºï¼ˆä¸å—æ”¶åˆå½±éŸ¿ï¼‰ -->
      <span>è¡€é‡ï¼š<strong id="hp">100 / 100</strong></span>
      <span>è­·ç›¾å€¼ï¼š<strong id="shield">0</strong></span>
      <span>é­”åŠ›ï¼š<strong id="mp">0 / 0</strong></span>
<!-- æ³•å¸«å°ˆç”¨ï¼šé­”åŠ›è­·ç›¾ï¼ˆéæ³•å¸«æœƒè‡ªå‹•éš±è—ï¼‰ -->
<div id="manaShieldRow" style="display:none;">
  <span>é­”åŠ›è­·ç›¾ï¼š<strong id="manaShieldPct">0%</strong></span>
  <button id="manaShieldBtn" onclick="toggleMagicShield()">ğŸ›¡ï¸ é­”åŠ›è­·ç›¾ï¼šé—œ</button>
</div>

      <!-- é€²éšèƒ½åŠ›ï¼ˆé è¨­å±•é–‹ï¼‰ -->
      <div id="extra-stats" style="margin-top:6px;">
        <span>æ”»æ“ŠåŠ›ï¼š<strong id="atk">10</strong></span>
       
        <span>é˜²ç¦¦åŠ›ï¼š<strong id="def">5</strong></span>
        
<span>æŠ€èƒ½å‚·å®³ï¼š<strong id="skillDamage">0%</strong></span>
        <!-- ğŸ†• å¹¸é‹æ•¸å€¼ï¼ˆç¸½å’Œï¼Œå¯é¸é¡¯ç¤ºï¼‰ -->
<span id="magicShieldRow" style="display:none;">
  é­”åŠ›è­·ç›¾ï¼š<strong id="magicShieldPct">0%</strong>
</span>
        <span>å›å¾©ï¼š<strong id="recover">0%</strong></span>
        <span>é–ƒé¿ï¼š<strong id="dodge">0%</strong></span>
        <span>çˆ†æ“Šç‡ï¼š<strong id="critRate">0%</strong></span>
        <span>çˆ†æ“Šå‚·å®³ï¼š<strong id="critMultiplier">0%</strong></span>
        <!-- å·²ç§»é™¤ï¼šæ”»æ“Šé€Ÿåº¦ã€é€£æ“Šç‡ -->
        <span>æ¸›å‚·ç‡ï¼š<strong id="damageReduce">0%</strong></span>
        <div>
  ç¶“é©—å€¼: <span id="expRate">0.0%</span>
</div>
<div>
  æ‰å¯¶ç‡: <span id="dropRate">0.0%</span>
</div>
<div>
  æ¥“å¹£æ‰è½ç‡: <span id="goldRate">0.0%</span>
</div>

      </div>
    </div>

    <div class="section" id="side-slot">
      <h2>ï¼ˆé ç•™å€å¡Šï¼‰</h2>
      <button onclick="window.openSkillModal()">ğŸ“˜ æŠ€èƒ½æ¸…å–®</button>
      <button onclick="openEquipmentModal()">âš”ï¸ è£å‚™å¼·åŒ–ç³»çµ±</button>
      <button onclick="openCoreEnhancePanel()">ğŸ§ª æ ¸å¿ƒå¼·åŒ–ç³»çµ±</button>
      <button onclick="openElementEquipmentPanel()">âœ¨ å…ƒç´ è£å‚™</button>
      <button onclick="openModulePanel()">æ¢å¾©ç³»çµ±</button>
<button onclick="upgradeClover()">å‡ç´šå¹¸é‹è‰</button>
  </div>
</div>

<script>
  // æ”¶åˆåˆ‡æ›
  function toggleExtraStats() {
    const box = document.getElementById('extra-stats');
    const btn = document.getElementById('toggle-extra-stats');
    if (!box || !btn) return;
    const isShown = box.style.display !== 'none';
    box.style.display = isShown ? 'none' : '';
    btn.textContent = isShown ? 'å±•é–‹é€²éšèƒ½åŠ›' : 'æ”¶åˆé€²éšèƒ½åŠ›';
  }
</script>

  <div id="skillBackdrop"></div>
  <div id="skillModal">
    <h3>æŠ€èƒ½æ¸…å–®</h3>
    <div id="skillList"></div>
    <button onclick="closeSkillModal()">é—œé–‰</button>
  </div>
  <div class="card skill-status-card">

  </div>

  <div class="section" style="width: 100%;">
    <h2>æˆ°é¬¥è¨­å®š</h2>

<div id="monsters-box"></div>
        <br>
    <label for="mapSelect">é¸æ“‡åœ°åœ–ï¼š</label>
    <select id="mapSelect"></select>
    <br>
    <label for="levelRange">é¸æ“‡æ€ªç‰©ç­‰ç´šç¯„åœï¼š</label>
    <div style="display: flex; align-items: center; gap: 0.5em; flex-wrap: wrap;">
      <select id="levelRange"></select>
      <span id="minLevelNotice" style="color: #ffd700; font-size: 0.9em;"></span>
    </div>
  </div>
  <div class="section" style="width: 100%;">
    <h2>æ€ªç‰©è³‡è¨Š</h2>
    <div id="monsterInfo">å°šæœªé­é‡æ€ªç‰©</div>
  </div>

  <div class="section" style="width: 100%;">
    <h2>è‡ªå‹•æˆ°é¬¥ç³»çµ±</h2>
    <div id="battleLog">æˆ°é¬¥æ—¥èªŒè¼‰å…¥ä¸­...</div>
  </div>
<body>
<body>


    <script src="manage/manifest.js"></script>
      <script src="manage/loader.js"></script
</body>

</body>


